{"version":3,"sources":["Components/Menu.js","Components/Editor.js","Components/Preview.js","Components/Status.js","Marked.js","index.js"],"names":["Menu","props","changeHandler","e","setState","name","target","value","fileNameHandler","state","className","type","this","onChange","onClick","saveHandler","ref","refs","href","themeChange","displayHandler","closeHandler","prevState","Component","Editor","inputHandler","input","handler","spellCheck","text","ReactMarkdown","require","gfm","Preview","markdown","pref","plugins","source","Status","wc","displaymode","theme","Marked","rawInputHandler","raw","wordCount","exportFileAs","filename","titleUpdate","saveToStore","stateData","view","viewClass","ls","set","closeFileHandler","displays","setTheme","document","getElementById","classList","remove","add","console","log","saveShortcutHandler","key","ctrlKey","preventDefault","dataUri","data","encodeURIComponent","mdRef","current","download","previewRef","innerHTML","htmlRef","md","split","filter","join","out","forEach","push","length","createRef","get","undefined","title","onKeyDown","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.e31554a3.chunk.js","sourcesContent":["import { Component } from \"react\";\r\n\r\nclass Menu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: props.name\r\n    }\r\n  }\r\n  static getDerivedStateFromProps(props, prevState) {\r\n    return {\r\n      name: props.name\r\n    }\r\n  }\r\n\r\n  changeHandler = e => {\r\n    this.setState({name: e.target.value});\r\n    this.props.fileNameHandler(e.target.value);\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className=\"header\">\r\n        <h1 className=\"branding\">Marked</h1>\r\n        <input type=\"text\" className=\"setName\" value={this.state.name} onChange={this.changeHandler} />\r\n        <div className=\"actions\">\r\n          {/*<div className=\"action\" ><i className=\"far fa-folder\"></i></div>*/}\r\n          <div className=\"action\" onClick={this.props.saveHandler}><i className=\"far fa-save\"></i></div>\r\n          <a ref={this.props.refs[0]} href=\"#\"><div className=\"action\"><i className=\"fab fa-markdown\"></i></div></a>\r\n          <a ref={this.props.refs[1]} href=\"#\"><div className=\"action\"><i className=\"far fa-file-code\"></i></div></a>\r\n          <div className=\"action\" onClick={this.props.themeChange}><i className=\"fas fa-adjust\"></i></div>\r\n          <div className=\"action\" onClick={this.props.displayHandler}><i className=\"far fa-eye\"></i></div>\r\n          <div className=\"action\" onClick={this.props.closeHandler}><i className=\"far fa-times-circle\"></i></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Menu;","import { Component } from \"react\";\r\n\r\nclass Editor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      input: ''\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, prevState) {\r\n    return {\r\n      input: props.text\r\n    }\r\n  }\r\n\r\n  inputHandler = e => {\r\n    this.setState({input: e.target.value});\r\n    this.props.handler(e.target.value);\r\n  }\r\n\r\n  render() {  \r\n    return (\r\n      <textarea className=\"editor\" onChange={this.inputHandler}  value={this.state.input} spellCheck=\"false\"></textarea>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Editor;","import { Component } from 'react';\r\nconst ReactMarkdown = require('react-markdown')\r\nconst gfm = require('remark-gfm')\r\n\r\n\r\nclass Preview extends Component {\r\n  render() { \r\n    const { text : markdown, pref } = this.props;\r\n    return (\r\n      <div className=\"preview\" ref={pref}>\r\n        <ReactMarkdown plugins={[gfm]} source={markdown} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Preview;","import { Component } from 'react';\r\n\r\nclass Status extends Component {\r\n  render() {\r\n    var {wc, displaymode, theme} = this.props\r\n    return (\r\n      <div className=\"footer\">\r\n        <div><span>{wc} words</span> | <span>View: {displaymode} </span> | <span>Theme: {theme}</span></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Status;","import { createRef , Component } from 'react';\nimport ls from 'local-storage';\n\nimport Menu from './Components/Menu';\nimport Editor from './Components/Editor';\nimport Preview from './Components/Preview';\nimport Status from './Components/Status';\n\n\nclass Marked extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: 'untitled',\n      theme: \"DARK\",\n      view: \"\",\n      viewClass: \"\",\n      raw: \"\",\n      wc: \"\"\n    }\n\n    this.previewRef = createRef()\n    this.mdRef = createRef()\n    this.htmlRef = createRef()\n  }\n\n  componentDidMount() {\n    var {filename, raw, theme, view, viewClass} = ls.get('marked-data') || { filename: \"untitled\", raw: \"\"}\n    if (theme === undefined) theme = \"DARK\"\n    if (view === undefined) {\n      view = \"DUAL\"\n      viewClass = \"\"\n    }\n    this.setState({\n      filename: filename,\n      raw: raw,\n      theme: theme,\n      view: view,\n      viewClass: viewClass\n    }, () => {\n      this.titleUpdate()\n      this.wordCount()\n      this.exportFileAs()\n      this.setTheme()\n    })\n  }\n\n  titleUpdate() {\n    document.title = \"Marked - \" + this.state.filename\n  }\n\n  rawInputHandler = input => {\n    this.setState({raw: input}, () => {\n      this.wordCount()\n      this.exportFileAs()\n    })\n  }\n\n  fileNameHandler = name => {\n    this.setState({filename: name}, () => {\n      this.titleUpdate()\n      this.exportFileAs()\n    })\n  }\n\n  saveToStore = () => {\n    var stateData = {\n      filename: this.state.filename,\n      raw: this.state.raw,\n      view: this.state.view,\n      viewClass: this.state.viewClass,\n      theme: this.state.theme\n    }\n    ls.set('marked-data', stateData)\n  }\n\n  closeFileHandler = () => {\n    this.setState({\n      filename: 'untitled',\n      raw: \"\"\n    }, this.saveToStore)\n  }\n\n\n  displayHandler = () => {\n    var displays = {\n      'DUAL': '',\n      'EDITOR': 'editoronly',\n      'PREVIEW': 'previewonly'\n    }\n    if (this.state.view==='DUAL')\n      this.setState({view: 'EDITOR', viewClass: displays.EDITOR})\n    else if (this.state.view==='EDITOR')\n      this.setState({view: 'PREVIEW', viewClass: displays.PREVIEW})\n    else\n      this.setState({view: 'DUAL', viewClass: displays.DUAL})\n  }\n\n  themeChange = () => {\n    if (this.state.theme==='DARK')\n      this.setState({theme: 'LIGHT'}, this.setTheme)\n    else\n      this.setState({theme: 'DARK'}, this.setTheme)\n  }\n\n  setTheme = () => {\n    var target = document.getElementById('root')\n    target.classList.remove(target.classList[0])\n    target.classList.add(this.state.theme)\n    console.log(target.classList)\n  }\n\n  saveShortcutHandler = e => {\n    if (!(e.key === 's' && e.ctrlKey) && !(e.key === 'DC3')) return true;\n    e.preventDefault()\n    this.saveToStore()\n    //send toast\n  }\n\n  exportFileAs = () => {\n    if (this.state.wc!==0) {\n      var dataUri\n      var data\n      data = this.state.raw\n      dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(data);\n      this.mdRef.current.href = dataUri\n      this.mdRef.current.download = this.state.filename + \".md\"\n      data = this.previewRef.current.innerHTML\n      dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(data);\n      this.htmlRef.current.href = dataUri\n      this.htmlRef.current.download = this.state.filename + \".html\"\n    } else {\n      this.mdRef.current.href = \"#\"\n      this.htmlRef.current.href = \"#\"\n    }\n  }\n\n  wordCount = () => {\n    var md = this.state.raw;\n    md = md.split('');\n    md = md.filter(e => e!=='#'&&e!=='*'&&e!=='-'&&e!=='_'&&e!=='|').join('')\n    md = md.split('\\n');\n    var out = [];\n    md.forEach(e => {\n      e.split(\" \").filter(e => e !== '').forEach(e => \n        out.push(e))\n    })\n    \n    this.setState({wc: out.length});\n  }\n\n  render() {  \n    return (\n      <div className=\"marked\" onKeyDown={this.saveShortcutHandler}>\n        <Menu className=\"header\" name={this.state.filename} fileNameHandler={this.fileNameHandler} saveHandler={this.saveToStore} closeHandler={this.closeFileHandler} displayHandler={this.displayHandler} themeChange={this.themeChange} refs={[this.mdRef, this.htmlRef]}/>\n        <div className={`display ${this.state.viewClass}`}>\n          <Editor text={this.state.raw} handler={this.rawInputHandler} />\n          <Preview pref={this.previewRef} text={this.state.raw} />\n        </div>\n        <Status wc={this.state.wc} displaymode={this.state.view} theme={this.state.theme} className=\"footer\" />\n      </div>\n    );\n  }\n}\n \nexport default Marked;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Marked from './Marked';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Marked />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}