{"version":3,"sources":["Components/Menu.js","Components/Editor.js","Components/Preview.js","Components/Status.js","Marked.js","index.js"],"names":["Menu","props","state","name","changeHandler","bind","e","this","setState","target","value","fileNameHandler","className","type","onChange","onClick","saveHandler","ref","refs","href","themeChange","displayHandler","closeHandler","prevState","Component","Editor","input","inputHandler","handler","spellCheck","text","ReactMarkdown","require","gfm","Preview","markdown","pref","plugins","source","Status","wc","displaymode","theme","Marked","filename","view","viewClass","raw","rawInputHandler","saveToStore","closeFileHandler","titleUpdate","saveShortcutHandler","wordCount","exportFileAs","previewRef","createRef","mdRef","htmlRef","ls","get","undefined","setTheme","document","title","stateData","set","displays","getElementById","classList","remove","add","console","log","key","ctrlKey","preventDefault","dataUri","data","encodeURIComponent","current","download","innerHTML","md","split","filter","join","out","forEach","push","length","onKeyDown","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c47af530.chunk.js","sourcesContent":["import { Component } from \"react\";\r\n\r\nclass Menu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: props.name\r\n    }\r\n    this.changeHandler = this.changeHandler.bind(this)\r\n  }\r\n  static getDerivedStateFromProps(props, prevState) {\r\n    return {\r\n      name: props.name\r\n    }\r\n  }\r\n\r\n  changeHandler(e) {\r\n    this.setState({name: e.target.value});\r\n    this.props.fileNameHandler(e.target.value);\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className=\"header\">\r\n        <h1 className=\"branding\">Marked</h1>\r\n        <input type=\"text\" className=\"setName\" value={this.state.name} onChange={this.changeHandler} />\r\n        <div className=\"actions\">\r\n          {/*<div className=\"action\" ><i className=\"far fa-folder\"></i></div>*/}\r\n          <div className=\"action\" onClick={this.props.saveHandler}><i className=\"far fa-save\"></i></div>\r\n          <a ref={this.props.refs[0]} href=\"#\"><div className=\"action\"><i className=\"fab fa-markdown\"></i></div></a>\r\n          <a ref={this.props.refs[1]} href=\"#\"><div className=\"action\"><i className=\"far fa-file-code\"></i></div></a>\r\n          <div className=\"action\" onClick={this.props.themeChange}><i className=\"fas fa-adjust\"></i></div>\r\n          <div className=\"action\" onClick={this.props.displayHandler}><i className=\"far fa-eye\"></i></div>\r\n          <div className=\"action\" onClick={this.props.closeHandler}><i className=\"far fa-times-circle\"></i></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Menu;","import { Component } from \"react\";\r\n\r\nclass Editor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      input: ''\r\n    }\r\n    this.inputHandler = this.inputHandler.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, prevState) {\r\n    return {\r\n      input: props.text\r\n    }\r\n  }\r\n\r\n  inputHandler(e) {\r\n    this.setState({input: e.target.value});\r\n    this.props.handler(e.target.value);\r\n  }\r\n\r\n  render() {  \r\n    return (\r\n      <textarea className=\"editor\" onChange={this.inputHandler}  value={this.state.input} spellCheck=\"false\"></textarea>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Editor;","import { Component } from 'react';\r\nconst ReactMarkdown = require('react-markdown')\r\nconst gfm = require('remark-gfm')\r\n\r\n\r\nclass Preview extends Component {\r\n  render() { \r\n    const { text : markdown, pref } = this.props;\r\n    return (\r\n      <div className=\"preview\" ref={pref}>\r\n        <ReactMarkdown plugins={[gfm]} source={markdown} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Preview;","import { Component } from 'react';\r\n\r\nclass Status extends Component {\r\n  // props: wc, displaymode, theme\r\n  render() {\r\n    var {wc, displaymode, theme} = this.props\r\n    return (\r\n      <div className=\"footer\">\r\n        <div><span>{wc} words</span> | <span>View: {displaymode} </span> | <span>Theme: {theme}</span></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Status;","import { createRef , Component } from 'react';\nimport Menu from './Components/Menu';\nimport Editor from './Components/Editor';\nimport Preview from './Components/Preview';\nimport ls from 'local-storage';\nimport Status from './Components/Status';\n\n/* Features\nInput\nOutput\nThemer\nClipboard Service\nImport/Export/Persist\n*/\n\n/**\n * State\n * themestate\n * filename .md\n * input\n * viewstate\n */\n\n /**\n  * Handlers\n  * Theme\n  * TextChange -> Render\n  * Load from store > didmount\n  * Save to store > with updateState\n  * Export\n  * Close(reset) Handler\n  * Filename Change Handler\n  */\n\nclass Marked extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: 'untitled',\n      theme: \"DARK\",\n      view: \"\",\n      viewClass: \"\",\n      raw: \"\",\n      wc: \"\"\n    }\n    this.rawInputHandler = this.rawInputHandler.bind(this)\n    this.saveToStore = this.saveToStore.bind(this)\n    this.fileNameHandler = this.fileNameHandler.bind(this)\n    this.saveToStore = this.saveToStore.bind(this)\n    this.closeFileHandler = this.closeFileHandler.bind(this)\n    this.titleUpdate = this.titleUpdate.bind(this)\n    this.saveShortcutHandler = this.saveShortcutHandler.bind(this)\n    this.displayHandler = this.displayHandler.bind(this)\n    this.wordCount = this.wordCount.bind(this)\n    this.exportFileAs = this.exportFileAs.bind(this)\n    this.themeChange = this.themeChange.bind(this)\n\n\n    this.previewRef = createRef()\n    this.mdRef = createRef()\n    this.htmlRef = createRef()\n  }\n\n  componentDidMount() {\n    var {filename, raw, theme, view, viewClass} = ls.get('marked-data') || { filename: \"untitled\", raw: \"\"}\n    if (theme === undefined) theme = \"DARK\"\n    if (view === undefined) {\n      view = \"DUAL\"\n      viewClass = \"\"\n    }\n    this.setState({\n      filename: filename,\n      raw: raw,\n      theme: theme,\n      view: view,\n      viewClass: viewClass\n    }, () => {\n      this.titleUpdate()\n      this.wordCount()\n      this.exportFileAs()\n      this.setTheme()\n    })\n  }\n\n  titleUpdate() {\n    document.title = \"Marked - \" + this.state.filename\n  }\n\n  rawInputHandler(input) {\n    this.setState({raw: input}, () => {\n      this.wordCount()\n      this.exportFileAs()\n    })\n  }\n\n  fileNameHandler(name) {\n    this.setState({filename: name}, () => {\n      this.titleUpdate()\n      this.exportFileAs()\n    })\n  }\n\n  saveToStore() {\n    var stateData = {\n      filename: this.state.filename,\n      raw: this.state.raw,\n      view: this.state.view,\n      viewClass: this.state.viewClass,\n      theme: this.state.theme\n    }\n    ls.set('marked-data', stateData)\n  }\n\n  closeFileHandler() {\n    this.setState({\n      filename: 'untitled',\n      raw: \"\"\n    }, this.saveToStore)\n  }\n\n\n  displayHandler() {\n    var displays = {\n      'DUAL': '',\n      'EDITOR': 'editoronly',\n      'PREVIEW': 'previewonly'\n    }\n    if (this.state.view==='DUAL')\n      this.setState({view: 'EDITOR', viewClass: displays.EDITOR})\n    else if (this.state.view==='EDITOR')\n      this.setState({view: 'PREVIEW', viewClass: displays.PREVIEW})\n    else\n      this.setState({view: 'DUAL', viewClass: displays.DUAL})\n  }\n\n  themeChange() {\n    if (this.state.theme==='DARK')\n      this.setState({theme: 'LIGHT'}, this.setTheme)\n    else\n      this.setState({theme: 'DARK'}, this.setTheme)\n  }\n\n  setTheme() {\n    var target = document.getElementById('root')\n    target.classList.remove(target.classList[0])\n    target.classList.add(this.state.theme)\n    console.log(target.classList)\n  }\n\n  saveShortcutHandler(e) {\n    if (!(e.key === 's' && e.ctrlKey) && !(e.key === 'DC3')) return true;\n    e.preventDefault()\n    this.saveToStore()\n    //send toast\n  }\n\n  exportFileAs() {\n    if (this.state.wc!==0) {\n      var dataUri\n      var data\n      data = this.state.raw\n      dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(data);\n      this.mdRef.current.href = dataUri\n      this.mdRef.current.download = this.state.filename + \".md\"\n      data = this.previewRef.current.innerHTML\n      dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(data);\n      this.htmlRef.current.href = dataUri\n      this.htmlRef.current.download = this.state.filename + \".html\"\n    } else {\n      this.mdRef.current.href = \"#\"\n      this.htmlRef.current.href = \"#\"\n    }\n  }\n\n  wordCount() {\n    var md = this.state.raw;\n    md = md.split('');\n    md = md.filter(e => e!=='#'&&e!=='*'&&e!=='-'&&e!=='_'&&e!=='|').join('')\n    md = md.split('\\n');\n    var out = [];\n    md.forEach(e => {\n      e.split(\" \").filter(e => e !== '').forEach(e => \n        out.push(e))\n    })\n    \n    this.setState({wc: out.length});\n  }\n\n  render() {  \n    return (\n      <div className=\"marked\" onKeyDown={this.saveShortcutHandler}>\n        <Menu className=\"header\" name={this.state.filename} fileNameHandler={this.fileNameHandler} saveHandler={this.saveToStore} closeHandler={this.closeFileHandler} displayHandler={this.displayHandler} themeChange={this.themeChange} refs={[this.mdRef, this.htmlRef]}/>\n        <div className={`display ${this.state.viewClass}`}>\n          <Editor text={this.state.raw} handler={this.rawInputHandler} />\n          <Preview pref={this.previewRef} text={this.state.raw} />\n        </div>\n        <Status wc={this.state.wc} displaymode={this.state.view} theme={this.state.theme} className=\"footer\" />\n      </div>\n    );\n  }\n}\n \nexport default Marked;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Marked from './Marked';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Marked />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}